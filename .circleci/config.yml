version: 2.1

# infra-job
jobs:
  create_infrastructure:
    docker:
      image: amazon/aws-cli 
    steps:
      - checkout
      - run: 
        name: Ensure backend infrastructure exist
        command: |
          aws cloudformation deploy 
          --template-file template.yml 
          --stack-name my-cont-deploy-stack 

workflows:
  my_workflow:
    jobs:
      - create_infrastructure/run

